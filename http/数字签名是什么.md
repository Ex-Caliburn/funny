# 数字签名是什么

## 前言

参考阮一峰的文章  [数字签名是什么？](http://www.ruanyifeng.com/blog/2011/08/what_is_a_digital_signature.html)
签名是什么： 你个人的身份信息证明

### 流程

小明有两把钥匙， 公钥和私钥

小明把公钥给了小丽和小王

小丽要给小明写一封保密信，用小明公钥进行加密

小明收到了信，用私钥进行解密，就看到了信的内容，只要小明的私钥不泄漏，这份信就是安全的

小明给小丽回信，决定采用数字签名，写完之后用Hash函数，生成 信件的摘要(digest)

然后使用私钥对摘要进行加密，生成数字签名(signature)

小明将签名附在信下面，一起发给了小丽

小丽收到信之后，用小明的公钥对数字签名进行解密，得到信件的摘要，由此证明，这份信是小明发的

小丽对信的内容进行Hash函数，得到了摘要(digest) 和上一步得到的摘要进行比较，两者相同，则证明这份信未被修改过

隔壁小王想插入一脚，入侵小丽的电脑，把小明的公钥换成了自己的私钥，这样小丽以为的公钥还是小明的，小王用自己的私钥做成数字签名，写信和给小丽，小丽就会用假的公钥进行解密，小王得逞了

后台小丽发现了不对，无法确认公钥是否真的属于小明，想到一个办法，要求小明去找 证书中心 (certificate authority,简称CA)，为自己公钥认证，证书中心用自己的私钥，对小明的公钥和相关信息一起加密，生成了数字证书(Digital certificate)

小明拿到数字证书放心了，以后写信给小丽，只要在签名的同时附上数字证书

小丽收到信后，用CA的公钥解密数字证书，拿到小明的真正公钥，就可以证明数字签名是小明签的，用拿到的小明公钥进行签名的解密，然后生成摘要，再对比

### https

客户端想服务器发出加密请求

服务器用自己的私钥加密网页以后，连同本身的数字证书，一起发送给客户端。

客户端（浏览器）的"证书管理器"，有"受信任的根证书颁发机构"列表。客户端会根据这张列表，查看解开数字证书的公钥是否在列表之内。

如果数字证书记载的网址，与你正在浏览的网址不一致，就说明这张证书可能被冒用，浏览器会发出警告。

如果这张数字证书不是由受信任的机构颁发的，浏览器会发出另一种警告。

如果数字证书是可靠的，客户端就可以使用证书中的服务器公钥，对信息进行加密，然后与服务器交换加密信息。

## 总结

### 参考文献

1. [数字签名是什么？](http://www.ruanyifeng.com/blog/2011/08/what_is_a_digital_signature.html)
