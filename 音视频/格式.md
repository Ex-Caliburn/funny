# 格式

## 前言

### 主要技术点

封装技术，视音频压缩编码技术，流媒体技术

封装技术：就是把视频数据和音频数据打包成一个文件的规范。既我们生活中所看到的各种视频格式，包括avi、mp4、rmvb、flv、mkv、ts等。

视音频压缩编码技术：视频是由一张一张的照片组成的，每秒24帧，如果把所有的图片存储起来，数据量会很大，基于相邻的图片只会有比较微小的差别，视频压缩的原理就是存储每张图片和上一张不一样的地方，这样就大大的压缩的视频的体积，目前常用技术包括H.264、MPEG2、VP9、VP8等，音频编码压缩主要使用AAC、AC-3、MP3、WMA。

流媒体技术：流媒体技术主要用于网络视频播放和直播，在所有封装格式中，除了avi其他都支持流媒体。

### 视频播放原理

解协议：这一步主要针对流媒体，本地文件播放不需要，将流媒体协议数据解析为相应的封装格式。
解封装：输入的封装格式数据，分离成为视音频流的压缩编码数据。
解码：讲视音频流解码成非压缩的原始数据。

### 常见格式

Ogg = 带有 Theora 视频编码 + Vorbis 音频编码
MPEG4 = 带有 H.264 视频编码 + AAC 音频编码
WebM = 带有 VP8 视频编码 + Vorbis 音频编码

## 总结

未来是Webassembly的

### 参考文献

1. <https://www.jianshu.com/p/8845b976fcaf>
2. <https://juejin.cn/post/6922652997646286856#heading-1>
3. <https://www.npmjs.com/package/@ffmpeg/ffmpeg>
4. [IVWEB玩转wasm系列-揭秘wasm+h265直播播放器](https://juejin.cn/post/6877058224424976392)
