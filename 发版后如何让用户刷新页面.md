# 发版后如何让用户刷新页面

## 前言

1. 以后改接口要兼容老格式
2. 前端退出登陆或发版时后端让用户的session失效，使用 location.reload刷新页面，缺点，用户可能在编辑操作，用户长期不登出
3. 前端设置socket服务，发版时告知用户，将刷新的选择权交给用户，一些消息的推送也可以用这渠道做
4. 在每个api请求加上版本信息，如果版本不匹配就提示刷新
5. 灰度发布，可以根据cookie,ip
6. index.html 设置必须使用服务器最新页面，不设置强缓存

## 总结

location.reload(forcedReload);
该参数要求为 布尔 类型，当取值为 true 时，将强制浏览器从服务器重新获取当前页面资源，而不是从浏览器的缓存中读取，如果取值为 false 或不传该参数时，浏览器则可能会从缓存中读取当前页面。

```js
// 无缓存刷新页面（但页面引用的资源还是可能使用缓存，
// 大多数浏览器可以通过设置在打开开发者工具时禁用缓存实现无缓存需求）
window.location.reload(true);
```

可能有更好的方案

### 参考文献
